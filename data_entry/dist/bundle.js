!function r(o,i,s){function c(t,e){if(!i[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(m)return m(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var l=i[t]={exports:{}};o[t][0].call(l.exports,function(e){return c(o[t][1][e]||e)},l,l.exports,r,o,i,s)}return i[t].exports}for(var m="function"==typeof require&&require,e=0;e<s.length;e++)c(s[e]);return c}({1:[function(e,t,n){"use strict";n.__esModule=!0;var a=e("./modules/interfaces");n.dataBlobs=[{name:"Title",type:a.BlobType.generalMetaData,documentElementType:a.DocumentNodeType.input,documentElementClass:"title",xmlElementName:"title"},{name:"Author",type:a.BlobType.generalMetaData,documentElementType:a.DocumentNodeType.input,documentElementClass:"author",xmlElementName:"author"},{name:"Written",type:a.BlobType.generalMetaData,documentElementType:a.DocumentNodeType.input,documentElementClass:"written",xmlElementName:"written"},{name:"Published",type:a.BlobType.generalMetaData,documentElementType:a.DocumentNodeType.input,documentElementClass:"published",xmlElementName:"published"},{name:"Tags",type:a.BlobType.list,documentElementType:a.DocumentNodeType.textarea,documentElementClass:"tags",xmlElementName:"tags",xmlElementChildrenName:"tag"},{name:"Characters",type:a.BlobType.list,containsNames:!0,documentElementType:a.DocumentNodeType.textarea,documentElementClass:"characters",xmlElementName:"characters",xmlElementChildrenName:"character",attributePairs:[{text:"m",xml:{attribute:"gender",value:"male"}},{text:"f",xml:{attribute:"gender",value:"female"}},{text:"o",xml:{attribute:"gender",value:"other"}},{text:"u",xml:{attribute:"gender",value:"unknown"}},{text:"1",xml:{attribute:"type",value:"main"}},{text:"2",xml:{attribute:"type",value:"interacted"}},{text:"3",xml:{attribute:"type",value:"mentioned"}}]},{name:"Mythos entities",type:a.BlobType.list,containsNames:!0,documentElementType:a.DocumentNodeType.textarea,documentElementClass:"entities",xmlElementName:"entities",xmlElementChildrenName:"entity"},{name:"Books",type:a.BlobType.list,containsNames:!0,documentElementType:a.DocumentNodeType.textarea,documentElementClass:"books",xmlElementName:"books",xmlElementChildrenName:"book"},{name:"Locations",type:a.BlobType.list,containsNames:!0,documentElementType:a.DocumentNodeType.textarea,documentElementClass:"locations",xmlElementName:"locations",xmlElementChildrenName:"location"},{name:"Phobias",type:a.BlobType.list,documentElementType:a.DocumentNodeType.textarea,documentElementClass:"phobias",xmlElementName:"phobias",xmlElementChildrenName:"phobia"},{name:"Notes",type:a.BlobType.list,documentElementType:a.DocumentNodeType.textarea,documentElementClass:"notes",xmlElementName:"notes",xmlElementChildrenName:"note"},{name:"Related reading",type:a.BlobType.list,documentElementType:a.DocumentNodeType.textarea,documentElementClass:"related",xmlElementName:"related",xmlElementChildrenName:"item"},{name:"Full text",type:a.BlobType.main,documentElementType:a.DocumentNodeType.textarea,documentElementClass:"fulltext",xmlElementName:"body"},{name:"Summary",type:a.BlobType.main,documentElementType:a.DocumentNodeType.textarea,documentElementClass:"summary",xmlElementName:"summary"}]},{"./modules/interfaces":8}],2:[function(e,t,n){"use strict";n.__esModule=!0;var c=e("./formhandling");n.setupDialog=function(e,t,n){var a,l,r,o,i=document.querySelector(".big.dialog"),s=document.importNode(i,!0).content.querySelector("dialog");return document.querySelector("body").appendChild(s),s.querySelector("header h2").innerHTML=e,s.querySelector("form.search-box").classList.toggle("hidden",!t),s.querySelector("input.query").value="",s.querySelector("section.results ul").innerHTML="",s.querySelector("section.buttons").innerHTML="",s.querySelectorAll("section.buttons button").forEach(function(e){e.disabled=!0}),l=n,r=(a=s).querySelector("template.submit-button"),o=a.querySelector(".buttons"),l.forEach(function(e){var t=document.importNode(r.content,!0),n=t.querySelector("button");n.value=e.value,n.title=e.title,n.textContent=e.text,n.disabled=!0,o.appendChild(t)}),c.addValidation(s.querySelector("form.search-box")),c.addValidation(s.querySelector("form.search-results")),s}},{"./formhandling":6}],3:[function(e,t,n){"use strict";n.__esModule=!0,n.displayDialog=function(e,t,n,a){var l=document.querySelector("dialog.decision"),r=l.querySelector("h2"),o=l.querySelector("p");l.dataString=n,r.textContent=e,o.textContent=t,l.closeListener=function(e){e.preventDefault();var t=this;t.removeEventListener("close",t.closeListener),"yes"==this.returnValue&&a(t.dataString)},l.addEventListener("close",l.closeListener),l.showModal()}},{}],4:[function(e,t,n){"use strict";n.__esModule=!0;var l=e("./interfaces");n.getHtmlElementOf=function(e,t){var n="",a="";switch(e.type){case l.BlobType.generalMetaData:n=".metadata label."+e.documentElementClass+" input",a=".metadata label."+e.documentElementClass+" span";break;case l.BlobType.list:n=".metadata section."+e.documentElementClass+" textarea",a=".metadata section."+e.documentElementClass+" h2";break;case l.BlobType.main:n="main section."+e.documentElementClass+" textarea",a="main section."+e.documentElementClass+" h2"}return{element:document.querySelector(n),warningElement:t?document.querySelector(a):null}}},{"./interfaces":8}],5:[function(e,t,n){"use strict";n.__esModule=!0,n.saveFile=function(e,t,n){if(null!=n&&navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([n],{type:t}),e);var a=document.createElement("a");a.setAttribute("style","display:none");var l=window.URL.createObjectURL(new Blob([n],{type:t}));a.setAttribute("href",l),a.setAttribute("download",e),a.click(),window.URL.revokeObjectURL(l),a.remove()},n.loadFile=function(a,l){var e=document.createElement("input");e.type="file",e.addEventListener("change",function(e){var t=e.target.files[0],n=new FileReader;n.readAsText(t,"utf-8"),n.addEventListener("load",function(e){var t=e.target;0==t.result.length&&console.log("Uh-oh, spaghetti-o's! That file seems empty, just like my soul."),a(t.result,l)})}),e.click()}},{}],6:[function(e,t,n){"use strict";function a(e,t){e.querySelectorAll("button[type=submit]").forEach(function(e){e.disabled=!t})}n.__esModule=!0,n.addValidation=function(e){e.addEventListener("input",function(){a(this,this.checkValidity())})},n.SetSubmitButtonEnabled=a},{}],7:[function(e,t,n){"use strict";n.__esModule=!0;var a=e("./decisiondialog");n.SetTextBody=function(e,t){void 0===t&&(t=!0);var n=document.querySelector("main textarea.textcode");t?0!=n.value.length?a.displayDialog("Replace","Are you sure? This will mean losing the current text body.",e,function(e){n.value=e}):n.value=e:n.value+="\n\n"+e,n.dispatchEvent(new Event("input",{bubbles:!0})),document.querySelector("input#code").click()},n.GetTextBody=function(){return document.querySelector("main textarea.textcode").value}},{"./decisiondialog":3}],8:[function(e,t,n){"use strict";var a,l;n.__esModule=!0,(a=n.DocumentNodeType||(n.DocumentNodeType={}))[a.input=0]="input",a[a.textarea=1]="textarea",(l=n.BlobType||(n.BlobType={}))[l.generalMetaData=0]="generalMetaData",l[l.list=1]="list",l[l.main=2]="main"},{}],9:[function(e,t,n){"use strict";n.__esModule=!0;var r=e("./bigdialog"),c=e("./formhandling");function o(e){var t=e;return[{description:"Remove noinclude",regexp:/<noinclude>([\S\s]*?)<\/noinclude>/g,replacement:"$1"},{description:"Remove drop initial",regexp:/{{2}drop *initial\|(.)}{2}/g,replacement:"$1"},{description:"Remove small caps",regexp:/{{2}sc\|(.*?)}{2}/g,replacement:"$1"},{description:"Remove end notes",regexp:/==Endnotes==[\S\s]*$/g,replacement:""},{description:"Remove tooltips",regexp:/{{2}tooltip\|(.*?)\|.*?\}{2}/g,replacement:"$1"},{description:"Remove references",regexp:/<ref>.*?<\/ref>/g,replacement:""},{description:"Remove indentations",regexp:/\n[ \t]+/g,replacement:"\n"},{description:"Remove links",regexp:/\[{2}.*?\|(.*?)\]{2}/g,replacement:"$1"},{description:"Remove right-aligning",regexp:/{{2}right.*?\|(.*?)\}{2}/g,replacement:"$1"},{description:"Remove centering",regexp:/{{2}c.*?\|(.*?)}{2}/g,replacement:"$1"},{description:"Remove blocks",regexp:/{{2}block.*?\|(.*?)}{2}/gs,replacement:"$1"},{description:"Fix attributes without quotes",regexp:/<(.*?) (.*?)=([^"].*?)([ >])/,replacement:'<$1 $2="$3"$4',exhaust:!0},{description:"Heading",regexp:/{{2}xx-larger\|(.*?)}{2}\n* /g,replacement:"<h1>$1</h1>\n\n"},{description:"Chapter title",regexp:/==(.*?)==\n*/g,replacement:"<h2>$1</h2>\n\n"},{description:"Poem lines with 2 indent | EXHAUST",regexp:/<poem>([\S\s]*?)\n(?!<line)::(.+?)\n([\S\s]*?)<\/poem>/g,replacement:"<poem>$1\n<line indent=2>$2</line>\n$3</poem>",exhaust:!0},{description:"Poem lines with 1 indent | EXHAUST",regexp:/<poem>([\S\s]*?)\n(?!<line):(.+?)\n([\S\s]*?)<\/poem>/g,replacement:"<poem>$1\n<line indent=1>$2</line>\n$3</poem>",exhaust:!0},{description:"Poem lines without indent | EXHAUST",regexp:/<poem>([\S\s]*?)\n(?!<line)(.+?)\n([\S\s]*?)<\/poem>/g,replacement:"<poem>$1\n<line>$2</line>\n$3</poem>",exhaust:!0},{description:"Poem lines using br tag",regexp:/\n(.*)<br\/>/g,replacement:"\n<line>$1</line>"},{description:"Add paragraph </p><p>tags",regexp:/\n\n/g,replacement:"</p>\n\n<p>"},{description:"Remove last paragraph start tag (b/c logic)",regexp:/([\S\s]*)<p>/g,replacement:"$1"},{description:"Remove first paragraph end tag (b/ logic)",regexp:/<\/p>([\S\s]*)/g,replacement:"$1"},{description:"Remove line breaks after paragraph start",regexp:/<p>\n+/g,replacement:"<p>"},{description:"Reverse poem and paragraph start tags",regexp:/<p>\n*<poem>/g,replacement:"<poem>\n<p>"},{description:"Reverse poem and paragraph end tags",regexp:/<\/poem>\n*<\/p>/g,replacement:"</p>\n</poem>"},{description:"Separate first line of poem pagagraph from paragraph start tag",regexp:/<p><line>/g,replacement:"<p>\n<line>"},{description:"Separate last line of poem paragraph from paragraph end tag",regexp:/<\/line><\/p>/g,replacement:"</line>\n</p>"},{description:"Remove paragraph tags around headings",regexp:/<p><(h[0-5])>(.*?)<\/\1><\/p>/g,replacement:"<$1>$2</$1>\n\n"},{description:"'' to emph",regexp:/\'{2}(.*?)\'{2}/g,replacement:"<emph>$1</emph>"},{description:"Remove triple newlines",regexp:/\n\n\n/g,replacement:"\n\n",exhaust:!0},{description:"Remove double spaces",regexp:/  /g,replacement:" ",exhaust:!0},{description:"&nbsp; to space",regexp:/&nbsp;/g,replacement:" "},{description:"Ellipsis",regexp:/\. ?\. ?\./g,replacement:"…"}].forEach(function(e){if(e.exhaust)for(;0<=t.search(e.regexp);)t=t.replace(e.regexp,e.replacement);else t=t.replace(e.regexp,e.replacement)}),t}function i(e,t,l,r){fetch(t+"/w/api.php?action=query&prop=revisions&rvprop=content&format=json&origin=*&rvslots=main&titles="+e).then(function(e){return e.json()}).then(function(e){var t=e.query.pages,n=t[Object.keys(t)[0]];if(n.revisions){var a=n.revisions[0].slots.main["*"];o(a);r(o(a),l)}})}n.displayDialog=function(e,t,n){var a=r.setupDialog("Download from Wikisource",!0,[{title:"Download and append to text",text:"Append",value:"append"},{title:"Download and replace current text",text:"Download",value:"replace"}]),l=a.querySelector("form.search-box");(l.wikiDialog=a).wikiUrl=t,a.callback=n,a.resultRowTemplate=a.querySelector(".result-row"),l.querySelector("input[type=text]").value=e,l.dispatchEvent(new Event("input")),l.addEventListener("submit",function(e){e.preventDefault();var t,s,n,a=this.wikiDialog,l=this.querySelector("input.query").value;a.query=l,t=l,n=(s=a).wikiUrl+"/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=15&srsearch="+t,fetch(n).then(function(e){return e.json()}).then(function(e){var t,n,a,l,r,o=e.query.search,i=[];o.forEach(function(e){i.push(e.title)}),t=i,a=(n=s).resultRowTemplate.content,l=n.querySelector(".results ul"),r=n.querySelector("form.search-results"),l.innerHTML="",0==t.length?(l.innerHTML="No results found for "+n.query+".",c.SetSubmitButtonEnabled(r,!1)):(t.forEach(function(e){var t=a.cloneNode(!0);t.querySelector(".text").innerHTML=e,t.querySelector("input[name=title]").value=e,l.appendChild(t)}),r.dispatchEvent(new Event("input")))})}),a.addEventListener("close",function(){var e=this;if("cancel"!=e.returnValue){var t=e.querySelector(".results input[type=radio][name=title]:checked");if(t){var n=t.value,a=e.wikiUrl;"replace"==e.returnValue?i(n,a,!0,e.callback):"append"==e.returnValue?i(n,a,!1,e.callback):alert("Whatcho talkin bout Willis?")}}e.remove()}),a.showModal()}},{"./bigdialog":2,"./formhandling":6}],10:[function(e,t,r){"use strict";r.__esModule=!0;var o=e("./bigdialog"),i=e("./textareamanagement");r.nameRegex=/(?<![\.;:!?] *) (?:<emph>)?((?:[A-Z][\wéáà]+ ?)+),?/g,r.displayDialog=function(e,t){var n,a,l=o.setupDialog("Detected names",!1,[{title:"Append names to lists",text:"Append",value:"append"},{title:"Cancel",text:"Cancel",value:"cancel"}]);!function(e,p,t,x){var g=t.querySelector(".results ul");if(g.innerHTML="",0<e.length){var f=t.querySelector(".complex-result-row"),h=t.querySelector(".complex-result-row.option");e.forEach(function(e){var t,n,a,l,r,o,i,s,c,m=document.importNode(f.content,!0),u=m.querySelector(".description"),d=m.querySelector(".details");u.innerText=e.matchText,d.innerHTML=(t=e,a="…"+(n=p).substring(Math.max(t.indexStart-24,0),t.indexStart),l=" <strong>"+t.matchText+"</strong> ",r=n.substring(t.indexEnd,Math.max(t.indexEnd+24,0))+"…",a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;"),r=r.replace(/</g,"&lt;").replace(/>/g,"&gt;"),a+l+r),o=e.matchText,i=x,s=h,(c=m.querySelector(".item-options")).innerHTML="",i.forEach(function(e){var t=document.importNode(s.content,!0),n=t.querySelector("input"),a=t.querySelector("span");n.value=e.value,n.setAttribute("name",o),n.checked=e.checked,a.textContent=e.text,c.appendChild(t)}),g.appendChild(m)})}}(function(e,t){var n,a=[],l=[];for(;null!==(n=t.exec(e));){var r=n[1].trim();l.indexOf(r)<0&&(l.push(r),a.push({matchText:n[1].trim(),indexStart:n.index,indexEnd:t.lastIndex}))}return t.lastIndex=0,a}(e,r.nameRegex),e,l,(n=t.filter(function(e){return 1==e.containsNames}),a=[],n.forEach(function(e){a.push({text:e.xmlElementChildrenName.charAt(0).toUpperCase()+e.xmlElementChildrenName.slice(1),value:e.xmlElementChildrenName})}),a.push({text:"Ignore",value:"ignore",checked:!0}),a)),l.addEventListener("close",function(){if("append"==this.returnValue){var n={};t.filter(function(e){return 1==e.containsNames}).forEach(function(e){n[e.xmlElementChildrenName]={dataBlob:e,content:[]}}),this.querySelectorAll("input[type=radio]:checked:not([value=ignore])").forEach(function(e){0<=Object.keys(n).indexOf(e.value)&&n[e.value].content.push(e.name)}),Object.keys(n).forEach(function(e){var t=n[e];i.addToListelement(t.dataBlob,t.content)})}this.remove()}),l.showModal()}},{"./bigdialog":2,"./textareamanagement":12}],11:[function(e,t,n){"use strict";n.__esModule=!0;var r,c=e("./namesearch"),o=e("./textareamanagement"),m=e("./xmlhandling"),a=!1;function l(e){var t=document.querySelector("div.htmltext");a?(t.removeEventListener("mouseup",i),t.addEventListener("mouseup",i)):i()}function i(){var e=document.getSelection();if(0==e.rangeCount||e.getRangeAt(0).collapsed)s();else{var t=e.getRangeAt(0),n=document.querySelector("div.htmltext");if(n.contains(t.startContainer)&&n.contains(t.endContainer)){var a=u(!0),l=t.getBoundingClientRect(),r=l.x,o=l.y+l.height;a.style.left=r+"px",a.style.top=o+"px",document.removeEventListener("click",s),document.addEventListener("click",s)}}}function s(){var e=document.getSelection();if(0==e.rangeCount||e.getRangeAt(0).collapsed){var t=u(!1);t&&t.remove(),document.removeEventListener("click",s)}}function u(e){var t=document.querySelector("div.selection-toolbar");if(null==t&&e){var n=document.querySelector("template.selection-toolbar"),a=document.importNode(n.content,!0);t=a.querySelector("div.selection-toolbar"),document.querySelector("div.html-panel").appendChild(a),t.querySelectorAll(".name-categories button").forEach(function(e){e.addEventListener("click",function(e){!function(t){var e=document.getSelection(),n=0<e.rangeCount?e.getRangeAt(0):null;if(null==n)return;var a=r.filter(function(e){return e.xmlElementChildrenName==t});if(0<a.length){var l=a[0];o.addToListelement(l,[n.toString().trim()])}}(e.target.value)})})}return t}n.setupRichText=function(e){r=e,document.querySelectorAll("input#html, input#code").forEach(function(e){e.addEventListener("change",function(e){var t=e.target.id,n=new DOMParser,a=document.querySelector("textarea.textcode"),l=document.querySelector("div.htmltext");if("html"==t){var r="<body>"+a.value+"</body>",o=n.parseFromString(r,"text/xml"),i=m.transformXml(o,m.xslCodeToHTML),s=i.querySelector("div.body").innerHTML.replace(c.nameRegex,' <mark class="potential-name">$1</mark>');l.innerHTML=s}})}),document.addEventListener("mousedown",function(){a=!0}),document.addEventListener("mouseup",function(){a=!1}),document.addEventListener("selectionchange",l)}},{"./namesearch":10,"./textareamanagement":12,"./xmlhandling":13}],12:[function(e,t,n){"use strict";n.__esModule=!0;var s=e("./dommanagement"),c=e("./decisiondialog");n.addToListelement=function t(n,a,e){void 0===e&&(e=!1);var l=s.getHtmlElementOf(n,!1).element,r=l.value,o=""==r?[]:r.split("\n");if(!e&&0<o.filter(function(e){return-1!==a.indexOf(e)}).length)return void c.displayDialog("Duplicates","Some of the items you're trying to add to "+n.name+" are duplicates. Add them anyway?","",function(e){t(n,a,!0)});var i=o.concat(a);l.value=i.join("\n")}},{"./decisiondialog":3,"./dommanagement":4}],13:[function(e,t,n){"use strict";n.__esModule=!0;var a=e("./decisiondialog"),i=e("./dommanagement");function l(e,t){var n=new XSLTProcessor,a=new DOMParser;return n.importStylesheet(a.parseFromString(t,"text/xml")),n.transformToDocument(e)}n.setupXMLValidation=function(e){var a=new DOMParser;e.forEach(function(e){var t=i.getHtmlElementOf(e,!0),n=t.element;n.warningElement=t.warningElement,n.addEventListener("input",function(e){var t="<body>"+this.value+"</body>",n=a.parseFromString(t,"text/xml");this.warningElement.classList.toggle("xmlwarning",!!n.querySelector("parsererror")),document.querySelector(".toolbar button.export").disabled=!!n.querySelector("parsererror")})})},n.makeXML=function(e){var o=document.implementation.createDocument("","",null),t=o.createElement("work");return o.appendChild(t),e.forEach(function(l){var r=o.createElement(l.xmlElementName),e=i.getHtmlElementOf(l,!1).element.value;l.xmlElementChildrenName?e.split(/[\r\n]+/).forEach(function(e){if(0<(e=e.trim()).length){var t=o.createElement(l.xmlElementChildrenName);if(l.attributePairs&&-1!==e.indexOf("|")){var n=e.split("|",2),a=n[0].toLowerCase();l.attributePairs.forEach(function(e){-1!==a.indexOf(e.text)&&t.setAttribute(e.xml.attribute,e.xml.value)}),e=n[1]}0<e.length&&(t.textContent=e,r.appendChild(t))}}):r.innerHTML=e;t.appendChild(r)}),o=l(o,n.xslPrettyXML),(new XMLSerializer).serializeToString(o)},n.loadXml=function(e,t){var r=(new DOMParser).parseFromString(e,"text/xml");console.log(r),t.forEach(function(e){var t=r.querySelector(e.xmlElementName);if(t){var n=i.getHtmlElementOf(e,!1).element;if(e.xmlElementChildrenName){var a=t.querySelectorAll(e.xmlElementChildrenName),l=[];a.forEach(function(t){var n="";e.attributePairs&&(e.attributePairs.forEach(function(e){t.getAttribute(e.xml.attribute)==e.xml.value&&(n+=e.text)}),n+="|"),l.push(n+t.innerHTML)}),n.value=l.join("\n")}else n.value=t.innerHTML}})},n.clear=function(t){a.displayDialog("Clear all fields","Are you sure? This will clear all fields and give you a clean slate.","yes",function(e){"yes"==e&&t.forEach(function(e){i.getHtmlElementOf(e,!1).element.value=""})})},n.transformXml=l,n.xslPrettyXML='<?xml version="1.0"?>\n<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">\n<xsl:output omit-xml-declaration="yes" indent="yes"/>\n\n<xsl:template match="node()|@*">\n  <xsl:copy>\n    <xsl:apply-templates select="node()|@*"/>\n  </xsl:copy>\n</xsl:template>\n</xsl:stylesheet>',n.xslCodeToHTML='<?xml version="1.0"?>\n<xsl:stylesheet version="1.0"\n    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">\n    <xsl:template match="body">\n      <div class="body"><xsl:apply-templates/></div>\n    </xsl:template>\n\n    <xsl:template match="emph">\n      <em><xsl:apply-templates/></em>\n    </xsl:template>\n\n    <xsl:template match="quote">\n        <blockquote>\n            <xsl:apply-templates/>\n            <footer>\n                <xsl:value-of select="@by"/>\n            </footer>\n        </blockquote>\n    </xsl:template>\n\n    <xsl:template match="gendered">\n        <mark class="gendered">\n            <xsl:attribute name="class">gendered\n                <xsl:value-of select="@gender"/>\n            </xsl:attribute>\n            <xsl:apply-templates/>\n        </mark>\n    </xsl:template>\n\n    <xsl:template match="poem">\n        <div class="poem">\n            <xsl:for-each select="section">\n                <section>\n                    <xsl:for-each select="line">\n                        <p>\n                            <xsl:if test="@indent">\n                                <xsl:attribute name="class">indent-<xsl:value-of select="@indent"/>\n                                </xsl:attribute>\n                            </xsl:if>\n                            <xsl:apply-templates/>\n                        </p>\n                    </xsl:for-each>\n                </section>\n            </xsl:for-each>\n        </div>\n    </xsl:template>\n\n    <xsl:template match="@*|node()">\n      <xsl:copy>\n        <xsl:apply-templates select="@*|node()"/>\n      </xsl:copy>\n    </xsl:template>\n\n</xsl:stylesheet>'},{"./decisiondialog":3,"./dommanagement":4}],14:[function(e,t,n){"use strict";n.__esModule=!0;var l=e("./modules/xmlhandling"),r=e("./modules/filemanagement"),a=e("./modules/fulltextmanagement"),o=e("./modules/richtextmanagement"),i=e("./modules/mediawikisearch"),s=e("./modules/namesearch"),c=e("./DataBlobConfig");document.querySelector("section.toolbar button.wikisource").addEventListener("click",function(e){e.preventDefault();var t=document.querySelector(".metadata input[name=title]").value;i.displayDialog(t,"https://en.wikisource.org",a.SetTextBody)}),document.querySelector("section.toolbar button[value='find-names']").addEventListener("click",function(e){e.preventDefault(),s.displayDialog(a.GetTextBody(),c.dataBlobs)}),document.querySelector("section.toolbar button[value='export']").addEventListener("click",function(e){e.preventDefault();var t=l.makeXML(c.dataBlobs),n=document.querySelector(".metadata input[name=title]").value;0==n.length&&(n="Unknown");var a=n+".xml";r.saveFile(a,"text/xml",t)}),document.querySelector("section.toolbar button[value='import']").addEventListener("click",function(e){e.preventDefault(),r.loadFile(l.loadXml,c.dataBlobs)}),document.querySelector("section.toolbar button[value='clear']").addEventListener("click",function(e){e.preventDefault(),l.clear(c.dataBlobs)}),o.setupRichText(c.dataBlobs),l.setupXMLValidation(c.dataBlobs)},{"./DataBlobConfig":1,"./modules/filemanagement":5,"./modules/fulltextmanagement":7,"./modules/mediawikisearch":9,"./modules/namesearch":10,"./modules/richtextmanagement":11,"./modules/xmlhandling":13}]},{},[14]);
//# sourceMappingURL=bundle.js.map
