{"version":3,"sources":["bundle.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","__esModule","FormHandling","setupDialog","title","useSearchForm","submitButtons","dialog","submitButtonTemplate","submitButtonContainer","dialogTemplate","document","querySelector","importNode","content","appendChild","innerHTML","classList","toggle","value","querySelectorAll","forEach","button","disabled","buttonInfo","submitButtonFragment","submitButtonElement","textContent","text","classes","buttonClass","add","addValidation","./formhandling","2","displayDialog","description","dataString","callback","dialogTitle","dialogDescription","addEventListener","event","preventDefault","this","returnValue","showModal","3","saveFile","name","mime","data","navigator","msSaveBlob","Blob","type","linkElement","createElement","setAttribute","url","window","URL","createObjectURL","click","revokeObjectURL","remove","loadFile","inputElement","file","target","files","fileReader","FileReader","readAsText","result","console","log","4","SetSubmitButtonEnabled","form","state","checkValidity","5","BigDialog","wikiToXML","convertedText","regexp","replacement","exhaust","search","replace","getMediaWikiText","article","wikiUrl","resultHandler","fetch","then","response","json","pages","query","page","Object","keys","revisions","slots","main","defaultSearch","searchForm","wikiDialog","resultRowTemplate","dispatchEvent","Event","endpoint","titles","template","container","resultsForm","searchResults","push","row","cloneNode","selectedItem","wikiUrl_1","alert","./bigdialog","6","XMLHandling","TextAreaManagement","itemOptions","checked","matches","resultsContainer","template_1","optionTemplate_1","match","matchGroup","abstractStart","abstractMain","abstractEnd","optionTemplate","optionsContainer","rowElement","textElement","detailsElement","innerText","matchText","substring","Math","max","indexStart","indexEnd","itemOption","optionElement","spanElement","displayMatches","regExp","groups","foundNames","exec","trim","indexOf","index","lastIndex","findUniqueMatches","categorized_1","dataPairs","filter","pair","containsNames","xmlElementChildrenName","dataPair","element","categoryName","category","currentTextContent","getTextareaContents","documentElementSelector","newTextContent","join","setTextareaContents","./textareamanagement","./xmlhandling","7","selector","newContent","warnIfNotFull","8","DocNodeType","DecisionDialog","domParser","DOMParser","xmlElementSelector","documentElementType","input","documentElementXmlWarningSelector","textarea","xmlElementAttributes","xml","attribute","setupXMLValidation","warningElement","xmlString","testDom","parseFromString","makeXML","xmlDocument","xmlElement","split","line","xmlChildElement_1","parts","attributes_1","toLowerCase","attributePair","XMLSerializer","serializeToString","LoadXml","xmlText","XmlDocument","documentElement","xmlChildElements","textElements_1","childElement","attributePreamble","getAttribute","Clear","decision","./decisiondialog","9","FileManagement","MediaWikiSearch","NameSearch","SetTextBody","textBodyElement","bubbles","filename","./modules/decisiondialog","./modules/filemanagement","./modules/mediawikisearch","./modules/namesearch","./modules/xmlhandling"],"mappings":"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","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\r\nexports.__esModule = true;\r\nvar FormHandling = require(\"./formhandling\");\r\nfunction setupDialog(title, useSearchForm, submitButtons) {\r\n    var dialogTemplate = document.querySelector(\".big.dialog\");\r\n    var dialogFragment = document.importNode(dialogTemplate, true).content;\r\n    var dialog = dialogFragment.querySelector(\"dialog\");\r\n    document.querySelector(\"body\").appendChild(dialog);\r\n    dialog.querySelector(\"header h2\").innerHTML = title;\r\n    dialog.querySelector(\"form.search-box\").classList.toggle(\"hidden\", !useSearchForm);\r\n    dialog.querySelector(\"input.query\").value = \"\";\r\n    dialog.querySelector(\"section.results ul\").innerHTML = \"\";\r\n    dialog.querySelector(\"section.buttons\").innerHTML = \"\";\r\n    dialog.querySelectorAll(\"section.buttons button\").forEach(function (button) {\r\n        button.disabled = true;\r\n    });\r\n    setupSubmitButtons(dialog, submitButtons);\r\n    FormHandling.addValidation(dialog.querySelector(\"form.search-box\"));\r\n    FormHandling.addValidation(dialog.querySelector(\"form.search-results\"));\r\n    return dialog;\r\n}\r\nexports.setupDialog = setupDialog;\r\nfunction setupSubmitButtons(dialog, submitButtons) {\r\n    var submitButtonTemplate = dialog.querySelector(\"template.submit-button\");\r\n    var submitButtonContainer = dialog.querySelector(\".buttons\");\r\n    submitButtons.forEach(function (buttonInfo) {\r\n        var submitButtonFragment = document.importNode(submitButtonTemplate.content, true);\r\n        var submitButtonElement = submitButtonFragment.querySelector(\"button\");\r\n        submitButtonElement.value = buttonInfo.value;\r\n        submitButtonElement.title = buttonInfo.title;\r\n        submitButtonElement.textContent = buttonInfo.text;\r\n        buttonInfo.classes.forEach(function (buttonClass) {\r\n            submitButtonElement.classList.add(buttonClass);\r\n        });\r\n        submitButtonElement.disabled = true;\r\n        submitButtonContainer.appendChild(submitButtonFragment);\r\n    });\r\n}\r\n\n},{\"./formhandling\":4}],2:[function(require,module,exports){\n\"use strict\";\r\nexports.__esModule = true;\r\nfunction displayDialog(title, description, dataString, callback) {\r\n    var dialog = document.querySelector(\"dialog.decision\");\r\n    var dialogTitle = dialog.querySelector(\"h2\");\r\n    var dialogDescription = dialog.querySelector(\"p\");\r\n    dialog.dataString = dataString;\r\n    dialogTitle.textContent = title;\r\n    dialogDescription.textContent = description;\r\n    dialog.addEventListener(\"close\", function (event) {\r\n        event.preventDefault();\r\n        var dialog = this;\r\n        if (this.returnValue == \"yes\") {\r\n            callback(dialog.dataString);\r\n        }\r\n    });\r\n    dialog.showModal();\r\n}\r\nexports.displayDialog = displayDialog;\r\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\r\nexports.__esModule = true;\r\nfunction saveFile(name, mime, data) {\r\n    if (data != null && navigator.msSaveBlob)\r\n        return navigator.msSaveBlob(new Blob([data], { type: mime }), name);\r\n    var linkElement = document.createElement(\"a\");\r\n    linkElement.setAttribute(\"style\", \"display:none\");\r\n    var url = window.URL.createObjectURL(new Blob([data], { type: mime }));\r\n    linkElement.setAttribute(\"href\", url);\r\n    linkElement.setAttribute(\"download\", name);\r\n    linkElement.click();\r\n    window.URL.revokeObjectURL(url);\r\n    linkElement.remove();\r\n}\r\nexports.saveFile = saveFile;\r\nfunction loadFile(callback) {\r\n    var inputElement = document.createElement(\"input\");\r\n    inputElement.type = \"file\";\r\n    inputElement.addEventListener(\"change\", function (event) {\r\n        var eventTarget = event.target;\r\n        var file = eventTarget.files[0];\r\n        var fileReader = new FileReader();\r\n        fileReader.readAsText(file, \"utf-8\");\r\n        fileReader.addEventListener(\"load\", function (event) {\r\n            var fileReader = event.target;\r\n            if (fileReader.result.length == 0) {\r\n                console.log(\"Uh-oh, spaghetti-o's! That file seems empty, just like my soul.\");\r\n            }\r\n            callback(fileReader.result);\r\n        });\r\n    });\r\n    inputElement.click();\r\n}\r\nexports.loadFile = loadFile;\r\n\n},{}],4:[function(require,module,exports){\n\"use strict\";\r\nexports.__esModule = true;\r\nfunction addValidation(form) {\r\n    form.addEventListener(\"input\", function () {\r\n        var form = this;\r\n        SetSubmitButtonEnabled(form, form.checkValidity());\r\n    });\r\n}\r\nexports.addValidation = addValidation;\r\nfunction SetSubmitButtonEnabled(form, state) {\r\n    form.querySelectorAll(\"button[type=submit]\").forEach(function (button) {\r\n        button.disabled = !state;\r\n    });\r\n}\r\nexports.SetSubmitButtonEnabled = SetSubmitButtonEnabled;\r\n\n},{}],5:[function(require,module,exports){\n\"use strict\";\r\nexports.__esModule = true;\r\nvar BigDialog = require(\"./bigdialog\");\r\nvar FormHandling = require(\"./formhandling\");\r\nfunction displayDialog(defaultSearch, wikiUrl, callback) {\r\n    var dialog = BigDialog.setupDialog(\"Download from Wikisource\", true, [\r\n        {\r\n            title: \"Download and append to text\",\r\n            text: \"Append\",\r\n            value: \"append\",\r\n            classes: [\"fas\", \"fa-file-medical\"]\r\n        },\r\n        {\r\n            title: \"Download and replace current text\",\r\n            text: \"Download\",\r\n            value: \"replace\",\r\n            classes: [\"fas\", \"fa-file-alt\"]\r\n        }\r\n    ]);\r\n    var searchForm = dialog.querySelector(\"form.search-box\");\r\n    searchForm.wikiDialog = dialog;\r\n    dialog.wikiUrl = wikiUrl;\r\n    dialog.callback = callback;\r\n    dialog.resultRowTemplate = dialog.querySelector(\".result-row\");\r\n    var searchBox = searchForm.querySelector(\"input[type=text]\");\r\n    searchBox.value = defaultSearch;\r\n    searchForm.dispatchEvent(new Event(\"input\"));\r\n    searchForm.addEventListener(\"submit\", function (event) {\r\n        event.preventDefault();\r\n        var dialog = this.wikiDialog;\r\n        var query = this.querySelector(\"input.query\").value;\r\n        dialog.query = query;\r\n        searchMediaWiki(query, dialog);\r\n    });\r\n    dialog.addEventListener(\"close\", function () {\r\n        var dialog = this;\r\n        if (dialog.returnValue != \"cancel\") {\r\n            var selectedItem = dialog.querySelector(\".results input[type=radio][name=title]:checked\");\r\n            if (selectedItem) {\r\n                var title = selectedItem.value;\r\n                var wikiUrl_1 = dialog.wikiUrl;\r\n                if (dialog.returnValue == \"replace\") {\r\n                    getMediaWikiText(title, wikiUrl_1, true, dialog.callback);\r\n                }\r\n                else if (dialog.returnValue == \"append\") {\r\n                    getMediaWikiText(title, wikiUrl_1, false, dialog.callback);\r\n                }\r\n                else {\r\n                    alert(\"Whatcho talkin bout Willis?\");\r\n                }\r\n            }\r\n        }\r\n        dialog.remove();\r\n    });\r\n    dialog.showModal();\r\n}\r\nexports.displayDialog = displayDialog;\r\nfunction searchMediaWiki(query, dialog) {\r\n    var endpoint = dialog.wikiUrl + \"/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=15&srsearch=\" + query;\r\n    fetch(endpoint)\r\n        .then(function (response) { return response.json(); })\r\n        .then(function (data) {\r\n        var searchResults = data.query.search;\r\n        var titles = [];\r\n        searchResults.forEach(function (result) {\r\n            titles.push(result.title);\r\n        });\r\n        displaySearchResults(titles, dialog);\r\n    });\r\n}\r\nfunction displaySearchResults(titles, dialog) {\r\n    var template = dialog.resultRowTemplate.content;\r\n    var container = dialog.querySelector(\".results ul\");\r\n    var resultsForm = dialog.querySelector(\"form.search-results\");\r\n    container.innerHTML = \"\";\r\n    if (titles.length == 0) {\r\n        container.innerHTML = \"No results found for \" + dialog.query + \".\";\r\n        FormHandling.SetSubmitButtonEnabled(resultsForm, false);\r\n    }\r\n    else {\r\n        titles.forEach(function (title) {\r\n            var row = template.cloneNode(true);\r\n            row.querySelector(\".text\").innerHTML = title;\r\n            row.querySelector(\"input[name=title]\").value = title;\r\n            container.appendChild(row);\r\n        });\r\n        resultsForm.dispatchEvent(new Event(\"input\"));\r\n    }\r\n}\r\nfunction wikiToXML(text) {\r\n    var replacements = [\r\n        {\r\n            description: \"Remove noinclude\",\r\n            regexp: /<noinclude>([\\S\\s]*?)<\\/noinclude>/g,\r\n            replacement: \"$1\"\r\n        },\r\n        {\r\n            description: \"Remove drop initial\",\r\n            regexp: /{{2}drop *initial\\|(.)}{2}/g,\r\n            replacement: \"$1\"\r\n        },\r\n        {\r\n            description: \"Remove small caps\",\r\n            regexp: /{{2}sc\\|(.*?)}{2}/g,\r\n            replacement: \"$1\"\r\n        },\r\n        {\r\n            description: \"Remove end notes\",\r\n            regexp: /==Endnotes==[\\S\\s]*$/g,\r\n            replacement: \"\"\r\n        },\r\n        {\r\n            description: \"Remove tooltips\",\r\n            regexp: /{{2}tooltip\\|(.*?)\\|.*?\\}{2}/g,\r\n            replacement: \"$1\"\r\n        },\r\n        {\r\n            description: \"Remove references\",\r\n            regexp: /<ref>.*?<\\/ref>/g,\r\n            replacement: \"\"\r\n        },\r\n        {\r\n            description: \"Remove indentations\",\r\n            regexp: /\\n[ \\t]+/g,\r\n            replacement: \"\\n\"\r\n        },\r\n        {\r\n            description: \"Remove links\",\r\n            regexp: /\\[{2}.*?\\|(.*?)\\]{2}/g,\r\n            replacement: \"$1\"\r\n        },\r\n        {\r\n            description: \"Remove right-aligning\",\r\n            regexp: /{{2}right.*?\\|(.*?)\\}{2}/g,\r\n            replacement: \"$1\"\r\n        },\r\n        {\r\n            description: \"Remove centering\",\r\n            regexp: /{{2}c.*?\\|(.*?)}{2}/g,\r\n            replacement: \"$1\"\r\n        },\r\n        {\r\n            description: \"Remove blocks\",\r\n            regexp: /{{2}block.*?\\|(.*?)}{2}/gs,\r\n            replacement: \"$1\"\r\n        },\r\n        {\r\n            description: \"Fix attributes without quotes\",\r\n            regexp: /<(.*?) (.*?)=([^\"].*?)([ >])/,\r\n            replacement: '<$1 $2=\"$3\"$4',\r\n            exhaust: true\r\n        },\r\n        {\r\n            description: \"Heading\",\r\n            regexp: /{{2}xx-larger\\|(.*?)}{2}\\n* /g,\r\n            replacement: \"<h1>$1</h1>\\n\\n\"\r\n        },\r\n        {\r\n            description: \"Chapter title\",\r\n            regexp: /==(.*?)==\\n*/g,\r\n            replacement: \"<h2>$1</h2>\\n\\n\"\r\n        },\r\n        {\r\n            description: \"Poem lines with 2 indent | EXHAUST\",\r\n            regexp: /<poem>([\\S\\s]*?)\\n(?!<line)::(.+?)\\n([\\S\\s]*?)<\\/poem>/g,\r\n            replacement: \"<poem>$1\\n<line indent=2>$2</line>\\n$3</poem>\",\r\n            exhaust: true\r\n        },\r\n        {\r\n            description: \"Poem lines with 1 indent | EXHAUST\",\r\n            regexp: /<poem>([\\S\\s]*?)\\n(?!<line):(.+?)\\n([\\S\\s]*?)<\\/poem>/g,\r\n            replacement: \"<poem>$1\\n<line indent=1>$2</line>\\n$3</poem>\",\r\n            exhaust: true\r\n        },\r\n        {\r\n            description: \"Poem lines without indent | EXHAUST\",\r\n            regexp: /<poem>([\\S\\s]*?)\\n(?!<line)(.+?)\\n([\\S\\s]*?)<\\/poem>/g,\r\n            replacement: \"<poem>$1\\n<line>$2</line>\\n$3</poem>\",\r\n            exhaust: true\r\n        },\r\n        {\r\n            description: \"Poem lines using br tag\",\r\n            regexp: /\\n(.*)<br\\/>/g,\r\n            replacement: \"\\n<line>$1</line>\"\r\n        },\r\n        {\r\n            description: \"Add paragraph </p><p>tags\",\r\n            regexp: /\\n\\n/g,\r\n            replacement: \"</p>\\n\\n<p>\"\r\n        },\r\n        {\r\n            description: \"Remove last paragraph start tag (b/c logic)\",\r\n            regexp: /([\\S\\s]*)<p>/g,\r\n            replacement: \"$1\"\r\n        },\r\n        {\r\n            description: \"Remove first paragraph end tag (b/ logic)\",\r\n            regexp: /<\\/p>([\\S\\s]*)/g,\r\n            replacement: \"$1\"\r\n        },\r\n        {\r\n            description: \"Remove line breaks after paragraph start\",\r\n            regexp: /<p>\\n+/g,\r\n            replacement: \"<p>\"\r\n        },\r\n        {\r\n            description: \"Reverse poem and paragraph start tags\",\r\n            regexp: /<p>\\n*<poem>/g,\r\n            replacement: \"<poem>\\n<p>\"\r\n        },\r\n        {\r\n            description: \"Reverse poem and paragraph end tags\",\r\n            regexp: /<\\/poem>\\n*<\\/p>/g,\r\n            replacement: \"</p>\\n</poem>\"\r\n        },\r\n        {\r\n            description: \"Separate first line of poem pagagraph from paragraph start tag\",\r\n            regexp: /<p><line>/g,\r\n            replacement: \"<p>\\n<line>\"\r\n        },\r\n        {\r\n            description: \"Separate last line of poem paragraph from paragraph end tag\",\r\n            regexp: /<\\/line><\\/p>/g,\r\n            replacement: \"</line>\\n</p>\"\r\n        },\r\n        {\r\n            description: \"Remove paragraph tags around headings\",\r\n            regexp: /<p><(h[0-5])>(.*?)<\\/\\1><\\/p>/g,\r\n            replacement: \"<$1>$2</$1>\\n\\n\"\r\n        },\r\n        {\r\n            description: \"'' to emph\",\r\n            regexp: /\\'{2}(.*?)\\'{2}/g,\r\n            replacement: \"<emph>$1</emph>\"\r\n        },\r\n        {\r\n            description: \"Remove triple newlines\",\r\n            regexp: /\\n\\n\\n/g,\r\n            replacement: \"\\n\\n\",\r\n            exhaust: true\r\n        },\r\n        {\r\n            description: \"Remove double spaces\",\r\n            regexp: /  /g,\r\n            replacement: \" \",\r\n            exhaust: true\r\n        },\r\n        {\r\n            description: \"&nbsp; to space\",\r\n            regexp: /&nbsp;/g,\r\n            replacement: \" \"\r\n        },\r\n        {\r\n            description: \"Ellipsis\",\r\n            regexp: /\\. ?\\. ?\\./g,\r\n            replacement: \"…\"\r\n        }\r\n    ];\r\n    var convertedText = text;\r\n    replacements.forEach(function (replacement) {\r\n        if (replacement.exhaust) {\r\n            while (convertedText.search(replacement.regexp) >= 0) {\r\n                convertedText = convertedText.replace(replacement.regexp, replacement.replacement);\r\n            }\r\n        }\r\n        else {\r\n            convertedText = convertedText.replace(replacement.regexp, replacement.replacement);\r\n        }\r\n    });\r\n    return convertedText;\r\n}\r\nfunction getMediaWikiText(article, wikiUrl, replace, resultHandler) {\r\n    var endpoint = wikiUrl + \"/w/api.php?action=query&prop=revisions&rvprop=content&format=json&origin=*&rvslots=main&titles=\" + article;\r\n    fetch(endpoint)\r\n        .then(function (response) { return response.json(); })\r\n        .then(function (data) {\r\n        var pages = data.query.pages;\r\n        var page = pages[Object.keys(pages)[0]];\r\n        if (page.revisions) {\r\n            var text = page.revisions[0].slots.main[\"*\"];\r\n            var convertedText = wikiToXML(text);\r\n            resultHandler(wikiToXML(text), replace);\r\n        }\r\n    });\r\n}\r\n\n},{\"./bigdialog\":1,\"./formhandling\":4}],6:[function(require,module,exports){\n\"use strict\";\r\nexports.__esModule = true;\r\nvar BigDialog = require(\"./bigdialog\");\r\nvar XMLHandling = require(\"./xmlhandling\");\r\nvar TextAreaManagement = require(\"./textareamanagement\");\r\nvar itemOptions = [\r\n    {\r\n        text: \"Character\",\r\n        value: \"character\"\r\n    },\r\n    {\r\n        text: \"Creature\",\r\n        value: \"creature\"\r\n    },\r\n    {\r\n        text: \"Location\",\r\n        value: \"location\"\r\n    },\r\n    {\r\n        text: \"Book\",\r\n        value: \"book\"\r\n    },\r\n    {\r\n        text: \"Ignore\",\r\n        value: \"ignore\",\r\n        checked: true\r\n    }\r\n];\r\nfunction displayDialog(text) {\r\n    var dialog = BigDialog.setupDialog(\"Detected names\", false, [\r\n        {\r\n            title: \"Append names to lists\",\r\n            text: \"Append\",\r\n            value: \"append\",\r\n            classes: [\"fas\", \"fa-list\"]\r\n        },\r\n        {\r\n            title: \"Cancel\",\r\n            text: \"Cancel\",\r\n            value: \"cancel\",\r\n            classes: [\"fas\", \"fa-ban\"]\r\n        }\r\n    ]);\r\n    var nameRegex = /(?<![\\.;:!?] *) (?:<emph>)?((?:[A-Z][\\wéáà]+ ?)+),?/g;\r\n    var possibleNames = findUniqueMatches(text, nameRegex);\r\n    displayMatches(possibleNames, text, dialog);\r\n    dialog.addEventListener(\"close\", function () {\r\n        var dialog = this;\r\n        if (dialog.returnValue == \"append\") {\r\n            var categorized_1 = {};\r\n            var dataPairs = XMLHandling.dataPairs.filter(function (pair) { return pair.containsNames == true; });\r\n            dataPairs.forEach(function (pair) {\r\n                categorized_1[pair.xmlElementChildrenName] = {\r\n                    dataPair: pair,\r\n                    content: []\r\n                };\r\n            });\r\n            var checkedElements = dialog.querySelectorAll(\"input[type=radio]:checked:not([value=ignore])\");\r\n            checkedElements.forEach(function (element) {\r\n                if (Object.keys(categorized_1).indexOf(element.value) >= 0) {\r\n                    var category = categorized_1[element.value].content;\r\n                    category.push(element.name);\r\n                }\r\n            });\r\n            console.log(categorized_1);\r\n            Object.keys(categorized_1).forEach(function (categoryName) {\r\n                var category = categorized_1[categoryName];\r\n                var currentTextContent = TextAreaManagement.getTextareaContents(category.dataPair.documentElementSelector);\r\n                var newTextContent = category.content.join(\"\\n\");\r\n                if (currentTextContent.length == 0) {\r\n                    TextAreaManagement.setTextareaContents(category.dataPair.documentElementSelector, newTextContent, false);\r\n                }\r\n                else {\r\n                    TextAreaManagement.setTextareaContents(category.dataPair.documentElementSelector, currentTextContent + \"\\n\" + newTextContent, false);\r\n                }\r\n            });\r\n        }\r\n        dialog.remove();\r\n    });\r\n    dialog.showModal();\r\n}\r\nexports.displayDialog = displayDialog;\r\nfunction displayMatches(matches, text, dialog) {\r\n    var resultsContainer = dialog.querySelector(\".results ul\");\r\n    resultsContainer.innerHTML = \"\";\r\n    if (matches.length > 0) {\r\n        var template_1 = dialog.querySelector(\".complex-result-row\");\r\n        var optionTemplate_1 = dialog.querySelector(\".complex-result-row.option\");\r\n        matches.forEach(function (match) {\r\n            var rowElement = document.importNode(template_1.content, true);\r\n            var textElement = rowElement.querySelector(\".description\");\r\n            var detailsElement = rowElement.querySelector(\".details\");\r\n            textElement.innerText = match.matchText;\r\n            detailsElement.innerHTML = makeAbstract(match, text);\r\n            makeOptionItems(match.matchText, itemOptions, rowElement, optionTemplate_1);\r\n            resultsContainer.appendChild(rowElement);\r\n        });\r\n    }\r\n}\r\nfunction makeOptionItems(name, itemOptions, rowElement, optionTemplate) {\r\n    var optionsContainer = rowElement.querySelector(\".item-options\");\r\n    optionsContainer.innerHTML = \"\";\r\n    itemOptions.forEach(function (itemOption) {\r\n        var optionElement = document.importNode(optionTemplate.content, true);\r\n        var inputElement = optionElement.querySelector(\"input\");\r\n        var spanElement = optionElement.querySelector(\"span\");\r\n        inputElement.value = itemOption.value;\r\n        inputElement.setAttribute(\"name\", name);\r\n        inputElement.checked = itemOption.checked;\r\n        spanElement.textContent = itemOption.text;\r\n        optionsContainer.appendChild(optionElement);\r\n    });\r\n}\r\nfunction makeAbstract(matchGroup, text) {\r\n    var abstractStart = \"…\" + text.substring(Math.max(matchGroup.indexStart - 24, 0), matchGroup.indexStart);\r\n    var abstractMain = \" <strong>\" + matchGroup.matchText + \"</strong> \";\r\n    var abstractEnd = text.substring(matchGroup.indexEnd, Math.max(matchGroup.indexEnd + 24, 0)) + \"…\";\r\n    abstractStart = abstractStart.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\r\n    abstractEnd = abstractEnd.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\r\n    return abstractStart + abstractMain + abstractEnd;\r\n}\r\nfunction findUniqueMatches(text, regExp) {\r\n    var matches = [];\r\n    var groups;\r\n    var foundNames = [];\r\n    while ((groups = regExp.exec(text)) !== null) {\r\n        var match = groups[1].trim();\r\n        if (foundNames.indexOf(match) < 0) {\r\n            foundNames.push(match);\r\n            matches.push({\r\n                matchText: groups[1].trim(),\r\n                indexStart: groups.index,\r\n                indexEnd: regExp.lastIndex\r\n            });\r\n        }\r\n    }\r\n    regExp.lastIndex = 0;\r\n    return matches;\r\n}\r\n\n},{\"./bigdialog\":1,\"./textareamanagement\":7,\"./xmlhandling\":8}],7:[function(require,module,exports){\n\"use strict\";\r\nexports.__esModule = true;\r\nfunction getTextareaContents(selector) {\r\n    return document.querySelector(selector).textContent;\r\n}\r\nexports.getTextareaContents = getTextareaContents;\r\nfunction setTextareaContents(selector, newContent, warnIfNotFull) {\r\n    var textArea = document.querySelector(selector);\r\n    textArea.textContent = newContent;\r\n}\r\nexports.setTextareaContents = setTextareaContents;\r\n\n},{}],8:[function(require,module,exports){\n\"use strict\";\r\nexports.__esModule = true;\r\nvar DecisionDialog = require(\"./decisiondialog\");\r\nvar domParser = new DOMParser();\r\nvar DocNodeType;\r\n(function (DocNodeType) {\r\n    DocNodeType[DocNodeType[\"input\"] = 0] = \"input\";\r\n    DocNodeType[DocNodeType[\"textarea\"] = 1] = \"textarea\";\r\n})(DocNodeType || (DocNodeType = {}));\r\nexports.dataPairs = [\r\n    {\r\n        name: \"Title\",\r\n        xmlElementSelector: \"title\",\r\n        documentElementSelector: \".metadata input[name=title]\",\r\n        documentElementType: DocNodeType.input,\r\n        documentElementXmlWarningSelector: \".metadata label.title span\"\r\n    },\r\n    {\r\n        name: \"Author\",\r\n        xmlElementSelector: \"author\",\r\n        documentElementSelector: \".metadata input[name=author]\",\r\n        documentElementType: DocNodeType.input,\r\n        documentElementXmlWarningSelector: \".metadata label.author span\"\r\n    },\r\n    {\r\n        name: \"Written\",\r\n        xmlElementSelector: \"written\",\r\n        documentElementSelector: \".metadata input[name=written]\",\r\n        documentElementType: DocNodeType.input,\r\n        documentElementXmlWarningSelector: \".metadata label.written span\"\r\n    },\r\n    {\r\n        name: \"Published\",\r\n        xmlElementSelector: \"published\",\r\n        documentElementSelector: \".metadata input[name=published]\",\r\n        documentElementType: DocNodeType.input,\r\n        documentElementXmlWarningSelector: \".metadata label.published span\"\r\n    },\r\n    {\r\n        name: \"Summary\",\r\n        xmlElementSelector: \"summary\",\r\n        documentElementSelector: \"main .summary\",\r\n        documentElementType: DocNodeType.textarea,\r\n        documentElementXmlWarningSelector: \"main .summary-heading\"\r\n    },\r\n    {\r\n        name: \"Full text\",\r\n        xmlElementSelector: \"body\",\r\n        documentElementSelector: \"main .text\",\r\n        documentElementType: DocNodeType.textarea,\r\n        documentElementXmlWarningSelector: \"main .text-heading\"\r\n    },\r\n    {\r\n        name: \"Tags\",\r\n        xmlElementSelector: \"tags\",\r\n        documentElementSelector: \".metadata section.tags textarea\",\r\n        documentElementType: DocNodeType.textarea,\r\n        documentElementXmlWarningSelector: \".metadata section.tags h2\",\r\n        xmlElementChildrenName: \"tag\"\r\n    },\r\n    {\r\n        name: \"Characters\",\r\n        containsNames: true,\r\n        xmlElementSelector: \"characters\",\r\n        documentElementSelector: \".metadata section.characters textarea\",\r\n        documentElementType: DocNodeType.textarea,\r\n        documentElementXmlWarningSelector: \".metadata section.characters h2\",\r\n        xmlElementChildrenName: \"character\",\r\n        xmlElementAttributes: [\r\n            {\r\n                text: \"m\",\r\n                xml: {\r\n                    attribute: \"gender\",\r\n                    value: \"male\"\r\n                }\r\n            },\r\n            {\r\n                text: \"f\",\r\n                xml: {\r\n                    attribute: \"gender\",\r\n                    value: \"female\"\r\n                }\r\n            },\r\n            {\r\n                text: \"o\",\r\n                xml: {\r\n                    attribute: \"gender\",\r\n                    value: \"other\"\r\n                }\r\n            },\r\n            {\r\n                text: \"u\",\r\n                xml: {\r\n                    attribute: \"gender\",\r\n                    value: \"unknown\"\r\n                }\r\n            },\r\n            {\r\n                text: \"1\",\r\n                xml: {\r\n                    attribute: \"type\",\r\n                    value: \"main\"\r\n                }\r\n            },\r\n            {\r\n                text: \"2\",\r\n                xml: {\r\n                    attribute: \"type\",\r\n                    value: \"interacted\"\r\n                }\r\n            },\r\n            {\r\n                text: \"3\",\r\n                xml: {\r\n                    attribute: \"type\",\r\n                    value: \"mentioned\"\r\n                }\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        name: \"Creatures\",\r\n        containsNames: true,\r\n        xmlElementSelector: \"creatures\",\r\n        documentElementSelector: \".metadata section.creatures textarea\",\r\n        documentElementType: DocNodeType.textarea,\r\n        documentElementXmlWarningSelector: \".metadata section.creatures h2\",\r\n        xmlElementChildrenName: \"creature\"\r\n    },\r\n    {\r\n        name: \"Books\",\r\n        containsNames: true,\r\n        xmlElementSelector: \"books\",\r\n        documentElementSelector: \".metadata section.books textarea\",\r\n        documentElementType: DocNodeType.textarea,\r\n        documentElementXmlWarningSelector: \".metadata section.books h2\",\r\n        xmlElementChildrenName: \"book\"\r\n    },\r\n    {\r\n        name: \"Locations\",\r\n        containsNames: true,\r\n        xmlElementSelector: \"locations\",\r\n        documentElementSelector: \".metadata section.locations textarea\",\r\n        documentElementType: DocNodeType.textarea,\r\n        documentElementXmlWarningSelector: \".metadata section.locations h2\",\r\n        xmlElementChildrenName: \"location\"\r\n    },\r\n    {\r\n        name: \"Phobias\",\r\n        xmlElementSelector: \"phobias\",\r\n        documentElementSelector: \".metadata section.phobias textarea\",\r\n        documentElementType: DocNodeType.textarea,\r\n        documentElementXmlWarningSelector: \".metadata section.phobias h2\",\r\n        xmlElementChildrenName: \"phobia\"\r\n    },\r\n    {\r\n        name: \"Notes\",\r\n        xmlElementSelector: \"notes\",\r\n        documentElementSelector: \".metadata section.notes textarea\",\r\n        documentElementType: DocNodeType.textarea,\r\n        documentElementXmlWarningSelector: \".metadata section.notes h2\",\r\n        xmlElementChildrenName: \"note\"\r\n    },\r\n    {\r\n        name: \"Related reading\",\r\n        xmlElementSelector: \"relatedreading\",\r\n        documentElementSelector: \".metadata section.related-links textarea\",\r\n        documentElementType: DocNodeType.textarea,\r\n        documentElementXmlWarningSelector: \".metadata section.related-links h2\",\r\n        xmlElementChildrenName: \"link\"\r\n    }\r\n];\r\nfunction setupXMLValidation() {\r\n    exports.dataPairs.forEach(function (pair) {\r\n        var element = document.querySelector(pair.documentElementSelector);\r\n        element.warningElement = document.querySelector(pair.documentElementXmlWarningSelector);\r\n        element.addEventListener(\"input\", function (event) {\r\n            var element = this;\r\n            var xmlString = \"<body>\" + element.value + \"</body>\";\r\n            var testDom = domParser.parseFromString(xmlString, \"text/xml\");\r\n            element.warningElement.classList.toggle(\"xmlwarning\", !!testDom.querySelector(\"parsererror\"));\r\n            var exportButtonElement = document.querySelector(\".toolbar button.export\");\r\n            exportButtonElement.disabled = !!testDom.querySelector(\"parsererror\");\r\n        });\r\n    });\r\n}\r\nexports.setupXMLValidation = setupXMLValidation;\r\nfunction makeXML() {\r\n    var xmlTemplate = \"<?xml version = \\\"1.0\\\"?>\\n      <work>\\n          <title/>\\n          <author/>\\n          <written/>\\n          <published/>\\n          <tags/>\\n          <body/>\\n          <summary/>\\n          <characters/>\\n          <creatures/>\\n          <books/>\\n          <locations/>\\n          <phobias/>\\n          <notes/>\\n          <relatedreading/>\\n      </work>\\n      \";\r\n    var xmlDocument = domParser.parseFromString(xmlTemplate, \"text/xml\");\r\n    exports.dataPairs.forEach(function (pair) {\r\n        var xmlElement = xmlDocument.querySelector(pair.xmlElementSelector);\r\n        var text;\r\n        if (pair.documentElementType == DocNodeType.input) {\r\n            var documentElement = document.querySelector(pair.documentElementSelector);\r\n            text = documentElement.value;\r\n        }\r\n        else {\r\n            var documentElement = document.querySelector(pair.documentElementSelector);\r\n            text = documentElement.value;\r\n        }\r\n        if (pair.xmlElementChildrenName) {\r\n            var lines = text.split(/[\\r\\n]+/);\r\n            lines.forEach(function (line) {\r\n                line = line.trim();\r\n                if (line.length > 0) {\r\n                    var xmlChildElement_1 = xmlDocument.createElement(pair.xmlElementChildrenName);\r\n                    if (pair.xmlElementAttributes && line.indexOf(\"|\") !== -1) {\r\n                        var parts = line.split(\"|\", 2);\r\n                        var attributes_1 = parts[0].toLowerCase();\r\n                        pair.xmlElementAttributes.forEach(function (attributePair) {\r\n                            if (attributes_1.indexOf(attributePair.text) !== -1) {\r\n                                xmlChildElement_1.setAttribute(attributePair.xml.attribute, attributePair.xml.value);\r\n                            }\r\n                        });\r\n                        line = parts[1];\r\n                    }\r\n                    if (line.length > 0) {\r\n                        xmlChildElement_1.textContent = line;\r\n                        xmlElement.appendChild(xmlChildElement_1);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            xmlElement.innerHTML = text;\r\n        }\r\n    });\r\n    var serializer = new XMLSerializer();\r\n    var xmlString = serializer.serializeToString(xmlDocument);\r\n    return xmlString;\r\n}\r\nexports.makeXML = makeXML;\r\nfunction LoadXml(xmlText) {\r\n    var XmlDocument = domParser.parseFromString(xmlText, \"text/xml\");\r\n    exports.dataPairs.forEach(function (pair) {\r\n        var xmlElement = XmlDocument.querySelector(pair.xmlElementSelector);\r\n        var documentElement = document.querySelector(pair.documentElementSelector);\r\n        if (pair.xmlElementChildrenName) {\r\n            var xmlChildElements = xmlElement.querySelectorAll(pair.xmlElementChildrenName);\r\n            var textElements_1 = [];\r\n            xmlChildElements.forEach(function (childElement) {\r\n                var attributePreamble = \"\";\r\n                if (pair.xmlElementAttributes) {\r\n                    pair.xmlElementAttributes.forEach(function (attributePair) {\r\n                        if (childElement.getAttribute(attributePair.xml.attribute) == attributePair.xml.value) {\r\n                            attributePreamble += attributePair.text;\r\n                        }\r\n                    });\r\n                    attributePreamble += \"|\";\r\n                }\r\n                textElements_1.push(attributePreamble + childElement.innerHTML);\r\n            });\r\n            documentElement.value = textElements_1.join(\"\\n\");\r\n        }\r\n        else {\r\n            documentElement.value = xmlElement.innerHTML;\r\n        }\r\n    });\r\n}\r\nexports.LoadXml = LoadXml;\r\nfunction Clear() {\r\n    DecisionDialog.displayDialog(\"Cear all fields\", \"Are you sure? This will clear all fields and give you a clean slate.\", \"yes\", function (decision) {\r\n        if (decision == \"yes\") {\r\n            exports.dataPairs.forEach(function (dataPair) {\r\n                var elements = document.querySelectorAll(dataPair.documentElementSelector);\r\n                elements.forEach(function (element) {\r\n                    element.value = \"\";\r\n                });\r\n            });\r\n        }\r\n    });\r\n}\r\nexports.Clear = Clear;\r\n\n},{\"./decisiondialog\":2}],9:[function(require,module,exports){\n\"use strict\";\r\nexports.__esModule = true;\r\nvar XMLHandling = require(\"./modules/xmlhandling\");\r\nvar FileManagement = require(\"./modules/filemanagement\");\r\nvar DecisionDialog = require(\"./modules/decisiondialog\");\r\nvar MediaWikiSearch = require(\"./modules/mediawikisearch\");\r\nvar NameSearch = require(\"./modules/namesearch\");\r\nfunction SetTextBody(text, replace) {\r\n    if (replace === void 0) { replace = true; }\r\n    var textBodyElement = document.querySelector(\"main textarea.text\");\r\n    if (replace) {\r\n        if (textBodyElement.value.length != 0) {\r\n            DecisionDialog.displayDialog(\"Replace\", \"Are you sure? This will mean losing the current text body.\", text, function (text) {\r\n                textBodyElement.value = text;\r\n            });\r\n        }\r\n        else {\r\n            textBodyElement.value = text;\r\n        }\r\n    }\r\n    else {\r\n        textBodyElement.value += \"\\n\\n\" + text;\r\n    }\r\n    textBodyElement.dispatchEvent(new Event(\"input\", { bubbles: true }));\r\n}\r\nfunction setupToolbar() {\r\n    document.querySelector(\"section.toolbar button.wikisource\").addEventListener(\"click\", function (event) {\r\n        event.preventDefault();\r\n        var title = document.querySelector(\".metadata input[name=title]\").value;\r\n        MediaWikiSearch.displayDialog(title, \"https://en.wikisource.org\", SetTextBody);\r\n    });\r\n    document.querySelector(\"section.toolbar button.find-names\").addEventListener(\"click\", function (event) {\r\n        event.preventDefault();\r\n        var textBodyElement = document.querySelector(\"main textarea.text\");\r\n        NameSearch.displayDialog(textBodyElement.value);\r\n    });\r\n    document.querySelector(\"section.toolbar button.export\").addEventListener(\"click\", function (event) {\r\n        event.preventDefault();\r\n        var xmlString = XMLHandling.makeXML();\r\n        var title = document.querySelector(\".metadata input[name=title]\").value;\r\n        if (title.length == 0) {\r\n            title = \"Unknown\";\r\n        }\r\n        var filename = title + \".xml\";\r\n        FileManagement.saveFile(filename, \"text/xml\", xmlString);\r\n    });\r\n    document.querySelector(\"section.toolbar button.import\").addEventListener(\"click\", function (event) {\r\n        event.preventDefault();\r\n        FileManagement.loadFile(XMLHandling.LoadXml);\r\n    });\r\n    document.querySelector(\"section.toolbar button.clear\").addEventListener(\"click\", function (event) {\r\n        event.preventDefault();\r\n        XMLHandling.Clear();\r\n    });\r\n}\r\nsetupToolbar();\r\nXMLHandling.setupXMLValidation();\r\n\n},{\"./modules/decisiondialog\":2,\"./modules/filemanagement\":3,\"./modules/mediawikisearch\":5,\"./modules/namesearch\":6,\"./modules/xmlhandling\":8}]},{},[9]);\n"]}